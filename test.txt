COPY START 1000
EOF BYTE C' '.fdsfsd
THREE WORD 3
RETADR RESW 1
ZERO WORD 0
LENGTH RESW 1
BUFFER RESB 4096
.
FIRST STL RETADR
CLOOP JSUB RDREC
LDA LENGTH
COMP ZERO
JEQ ENDFIL
JSUB WRREC
JEQ ENDFIL
J CLOOP
ENDFIL LDA EOF
STA BUFFER
LDA THREE
STA LENGTH
JSUB WRREC
LDL INPUT
RSUB
.
.
.
INPUT BYTE X'F1'
MAXLEN WORD 4096
.
RDREC LDX ZERO
LDA ZERO
RLOOP TD INPUT
JEQ RLOOP
RD INPUT
COMP ZERO
JEQ EXIT
 A STCH BUFFER,X .X . .
TIX MAXLEN
JLT RLOOP
EXIT STX LENGTH
RSUB
.
.
.
OUTPUT BYTE X'05'
.
WRREC LDX ZERO
WLOOP TD OUTPUT
JEQ WLOOP
LDCH BUFFER , X
WD OUTPUT
TIX LENGTH
JLT WLOOP
RSUB
END FIRST